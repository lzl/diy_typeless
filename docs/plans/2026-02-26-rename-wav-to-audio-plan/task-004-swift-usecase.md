# Task 004: Update Swift UseCase Implementations

## Objective

Update Swift UseCase implementation files to use `AudioData` and new FFI function names.

## Files to Modify

1. `app/DIYTypeless/DIYTypeless/Data/UseCases/TranscribeAudioUseCaseImpl.swift`
2. `app/DIYTypeless/DIYTypeless/Data/UseCases/StopRecordingUseCaseImpl.swift`

## BDD Scenario Reference

Scenario 3, 4: Swift UseCase uses correct naming

## Implementation Details

### In TranscribeAudioUseCaseImpl.swift:

1. Update function signature:
   ```swift
   // Change:
   func execute(wavData: WavData, apiKey: String, language: String?) async throws -> String
   // To:
   func execute(audioData: AudioData, apiKey: String, language: String?) async throws -> String
   ```

2. Update guard statement:
   ```swift
   // Change:
   guard !wavData.bytes.isEmpty else
   // To:
   guard !audioData.bytes.isEmpty else
   ```

3. Update FFI call:
   ```swift
   // Change:
   let text = try transcribeWavBytes(
       apiKey: apiKey,
       wavBytes: wavData.bytes,
       language: language
   )
   // To:
   let text = try transcribeAudioBytes(
       apiKey: apiKey,
       audioBytes: audioData.bytes,
       language: language
   )
   ```

### In StopRecordingUseCaseImpl.swift:

1. Update return type:
   ```swift
   // Change:
   func execute() async throws -> WavData
   // To:
   func execute() async throws -> AudioData
   ```

2. Update variable name:
   ```swift
   // Change:
   let wavData = try stopRecording()
   // To:
   let audioData = try stopRecording()
   ```

3. Update continuation:
   ```swift
   // Change:
   continuation.resume(returning: wavData)
   // To:
   continuation.resume(returning: audioData)
   ```

## Verification Steps

1. Wait for Task 007 (FFI regeneration) to complete
2. Build: `./scripts/dev-loop.sh --testing`
3. Expected: Clean build, no Swift errors

## Dependencies

- **depends-on**: Task 007 (Regenerate FFI bindings)
  - Swift code depends on generated FFI headers

## Notes

- UniFFI generates Swift function names from Rust FFI exports
- `transcribe_audio_bytes` in Rust becomes `transcribeAudioBytes` in Swift
- `AudioData` struct will be generated by UniFFI
